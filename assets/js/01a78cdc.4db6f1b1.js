"use strict";(globalThis.webpackChunkgabe_docs=globalThis.webpackChunkgabe_docs||[]).push([[362],{1266:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>p,frontMatter:()=>a,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"Setup/setup","title":"Setup","description":"Here are the steps to get Gabe running from source.","source":"@site/docs/4. Setup/index.mdx","sourceDirName":"4. Setup","slug":"/setup","permalink":"/gabe/docs/setup","draft":false,"unlisted":false,"editUrl":"https://github.com/thesomewhatyou/gabe/tree/gh-pages/docs/4. Setup/index.mdx","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"id":"setup","title":"Setup","slug":"/setup","sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"3. Custom Commands","permalink":"/gabe/docs/custom-commands"},"next":{"title":"4.1. Config","permalink":"/gabe/docs/config"}}');var r=s(4848),t=s(8453),l=s(8774);const a={id:"setup",title:"Setup",slug:"/setup",sidebar_position:4},o="Setup",d={},c=[{value:"1. Install native dependencies",id:"1-install-native-dependencies",level:2},{value:"2. Install Node.js",id:"2-install-nodejs",level:2},{value:"3. Set up the database",id:"3-set-up-the-database",level:2},{value:"4. Clone the repo and install dependencies",id:"4-clone-the-repo-and-install-dependencies",level:2},{value:"5. (Optional) Configure Lavalink",id:"5-optional-configure-lavalink",level:2},{value:"6. Configure the bot",id:"6-configure-the-bot",level:2},{value:"7. Run the bot",id:"7-run-the-bot",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2}];function h(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components},{Details:s}=n;return s||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"setup",children:"Setup"})}),"\n",(0,r.jsx)(n.p,{children:"Here are the steps to get Gabe running from source."}),"\n",(0,r.jsxs)(s,{children:[(0,r.jsx)("summary",{children:"Recommended system requirements"}),(0,r.jsxs)("ul",{children:[(0,r.jsx)("li",{children:"64-bit CPU/operating system"}),(0,r.jsx)("li",{children:"Quad-core CPU or better"}),(0,r.jsx)("li",{children:"512MB or more of RAM"}),(0,r.jsx)("li",{children:"Unix-like operating system or VM (Ubuntu or Fedora recommended)"})]})]}),"\n",(0,r.jsx)(n.admonition,{type:"warning",children:(0,r.jsxs)(n.p,{children:["If you want to run the bot on Windows, use ",(0,r.jsx)("a",{href:"https://learn.microsoft.com/windows/wsl/install",children:"Windows Subsystem for Linux"}),". These instructions target Unix-like environments."]})}),"\n",(0,r.jsxs)(n.p,{children:["If questions pop up during setup, visit the #support channel on the ",(0,r.jsx)("a",{href:"https://gabe.net/support",children:"Gabe Support server"}),"."]}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsxs)(n.p,{children:["Prefer containerized deployments? Head over to the ",(0,r.jsx)(l.A,{to:"/docs/containers",children:"container setup guide"}),"."]})}),"\n",(0,r.jsx)(n.h2,{id:"1-install-native-dependencies",children:"1. Install native dependencies"}),"\n",(0,r.jsx)(n.p,{children:"Install the system packages required by Gabe and its dependencies."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Debian / Ubuntu (bookworm / noble or newer)"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo apt-get install git curl build-essential cmake ffmpeg sqlite3 ttf-mscorefonts-installer libmagick++-dev libvips-dev libzxing-dev\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Older releases might require extra steps (e.g., manual installs of ",(0,r.jsx)(n.code,{children:"libcgif-dev"})," or ",(0,r.jsx)(n.code,{children:"meson"}),")."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Fedora / RHEL (38 / 9 or newer)"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo dnf install git curl cmake ffmpeg sqlite gcc-c++ ImageMagick-c++-devel vips-devel cabextract zxing-cpp-devel\n"})}),"\n",(0,r.jsxs)(n.p,{children:["You may need RPM Fusion / EPEL for some packages. RHEL derivatives often require ",(0,r.jsx)("a",{href:"https://rpms.remirepo.net",children:"Remi's repo"})," for ",(0,r.jsx)(n.code,{children:"vips"}),". To install MS core fonts:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo rpm -i https://downloads.sourceforge.net/project/mscorefonts2/rpms/msttcore-fonts-installer-2.6-1.noarch.rpm\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Alpine (3.17+)"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo apk add git curl msttcorefonts-installer python3 sqlite3 alpine-sdk cmake ffmpeg imagemagick-dev vips-dev zxing-cpp-dev\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arch / Manjaro"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo pacman -S git curl cmake ffmpeg npm imagemagick libvips sqlite3 zxing-cpp\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Install ",(0,r.jsx)("a",{href:"https://aur.archlinux.org/packages/ttf-ms-win10-auto/",children:(0,r.jsx)(n.code,{children:"ttf-ms-win10-auto"})})," from the AUR for the Microsoft fonts."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"macOS (Homebrew)"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"brew install cmake ffmpeg imagemagick libvips\n"})}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"zxing-cpp"})," formula is unavailable on macOS, so QR features will be disabled without extra work."]}),"\n",(0,r.jsx)(n.h2,{id:"2-install-nodejs",children:"2. Install Node.js"}),"\n",(0,r.jsx)(n.p,{children:"Gabe targets Node.js 22.0.0 or newer. Using nvm makes version management easy:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.40.3/install.sh | bash\nnvm install 22\nnvm use 22\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Enable Corepack so the bundled ",(0,r.jsx)(n.code,{children:"pnpm"})," shim becomes available:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"corepack enable\n"})}),"\n",(0,r.jsx)(n.h2,{id:"3-set-up-the-database",children:"3. Set up the database"}),"\n",(0,r.jsx)(n.p,{children:"Gabe supports SQLite (zero-config) and PostgreSQL. PostgreSQL is more scalable, but SQLite is for babies."}),"\n",(0,r.jsx)(n.admonition,{type:"warning",children:(0,r.jsx)(n.p,{children:"STAY THE FUCK ON SQLITE! YOU WILL FUCKING REGRET IT WHEN POSTGRESQL TRIES TO FUCKING DIE!"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"SQLite:"})," no setup needed\u2014skip ahead."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"PostgreSQL:"})," Fine. Go suffer. ",(0,r.jsx)(l.A,{to:"/docs/postgresql",children:"PostgreSQL guide is right here, pal."})]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"4-clone-the-repo-and-install-dependencies",children:"4. Clone the repo and install dependencies"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd ~\ngit clone --recursive https://github.com/thesomewhatyou/gabe\ncd Gabe\npnpm install\n# Check if everything works here (report an issue if not)\npnpm build\n"})}),"\n",(0,r.jsx)(n.h2,{id:"5-optional-configure-lavalink",children:"5. (Optional) Configure Lavalink"}),"\n",(0,r.jsx)(n.p,{children:"Lavalink allows you to listen to music. This is not required, but I would do this."}),"\n",(0,r.jsx)(n.admonition,{type:"warning",children:(0,r.jsx)(n.p,{children:"Don't go on public instances. Hosting it yourself is MUCH better."})}),"\n",(0,r.jsx)(n.p,{children:"Gabe requires Lavalink v4+, which needs Java 17 or later."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Install Java"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Debian / Ubuntu\nsudo apt-get install openjdk-21-jdk\n\n# Fedora / RHEL\nsudo dnf install java-21-openjdk\n\n# Alpine\nsudo apk add openjdk21\n\n# Arch / Manjaro\nsudo pacman -S jdk-openjdk\n\n# macOS\nbrew install openjdk\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Download and link Lavalink"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd ~\nmkdir Lavalink\ncd Lavalink\ncurl -OL https://github.com/lavalink-devs/Lavalink/releases/latest/download/Lavalink.jar\nln -s ~/Gabe/application.yml .\n"})}),"\n",(0,r.jsx)(n.p,{children:"Run the server with:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"java -jar Lavalink.jar\n"})}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsxs)(n.p,{children:["Keep Lavalink running alongside Gabe\u2014use ",(0,r.jsx)(n.code,{children:"screen"}),", ",(0,r.jsx)(n.code,{children:"tmux"}),", systemd, just another terminal. Try pm2 as well."]})}),"\n",(0,r.jsx)(n.h2,{id:"6-configure-the-bot",children:"6. Configure the bot"}),"\n",(0,r.jsxs)(n.p,{children:["Gabe reads environment variables from ",(0,r.jsx)(n.code,{children:".env"}),". Copy the template and fill in values:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cp .env.example .env\nnano .env\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Create a Discord application, add a bot user, and paste its token into the ",(0,r.jsx)(n.code,{children:"TOKEN"})," variable. Save and exit (",(0,r.jsx)(n.code,{children:"Ctrl+X"}),", then ",(0,r.jsx)(n.code,{children:"Y"}),", then ",(0,r.jsx)(n.code,{children:"Enter"}),")."]}),"\n",(0,r.jsxs)(n.p,{children:["Consult the ",(0,r.jsx)(l.A,{to:"/docs/config",children:"configuration reference"})," for variable descriptions."]}),"\n",(0,r.jsx)(n.h2,{id:"7-run-the-bot",children:"7. Run the bot"}),"\n",(0,r.jsx)(n.p,{children:"Start Gabe with:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"pnpm start\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Generate an invite link via the Discord Developer Portal (",(0,r.jsx)(n.code,{children:"OAuth2"})," \u2192 ",(0,r.jsx)(n.code,{children:"URL Generator"}),")."]}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["Select the ",(0,r.jsx)(n.code,{children:"bot"})," and ",(0,r.jsx)(n.code,{children:"applications.commands"})," scopes and grant the permissions highlighted in the dashboard screenshot."]})}),"\n",(0,r.jsx)(n.p,{children:"For 24/7 hosting, install and use PM2:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"pnpm add -g pm2\npm2 start ecosystem.config.cjs\n"})}),"\n",(0,r.jsxs)(n.admonition,{type:"tip",children:[(0,r.jsx)(n.p,{children:"To update later:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"git pull\npnpm install\npnpm build\n"})})]}),"\n",(0,r.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,r.jsxs)(s,{children:[(0,r.jsx)("summary",{children:"Error: Cannot find module './build/Release/image.node'"}),(0,r.jsx)("p",{children:(0,r.jsxs)(n.p,{children:["Run ",(0,r.jsx)("code",{children:"pnpm build"})," to compile the native image bindings."]})})]}),"\n",(0,r.jsxs)(s,{children:[(0,r.jsx)("summary",{children:(0,r.jsxs)(n.p,{children:[(0,r.jsx)("code",{children:"pnpm install"})," or ",(0,r.jsx)("code",{children:"pnpm build"})," fails with ELIFECYCLE"]})}),(0,r.jsx)("p",{children:(0,r.jsxs)(n.p,{children:["Install ",(0,r.jsx)("code",{children:"node-gyp"})," manually and reinstall dependencies:"]})}),(0,r.jsx)("pre",{children:(0,r.jsx)("code",{children:"pnpm i -g node-gyp rm -rf node_modules pnpm install"})})]}),"\n",(0,r.jsxs)(s,{children:[(0,r.jsx)("summary",{children:"Error: connect ECONNREFUSED 127.0.0.1:5432"}),(0,r.jsx)("p",{children:(0,r.jsxs)(n.p,{children:["PostgreSQL is not running. Start it with"," ","\n",(0,r.jsx)("code",{children:"sudo systemctl start postgresql"})," or double-check the"," ","\n",(0,r.jsx)("code",{children:"DB"})," value in ",(0,r.jsx)("code",{children:".env"})," if you intended to use SQLite."]})})]}),"\n",(0,r.jsxs)(s,{children:[(0,r.jsx)("summary",{children:"Tenor GIFs trigger decode errors"}),(0,r.jsxs)("p",{children:[(0,r.jsxs)(n.p,{children:["Request a Tenor API key from"," "]}),(0,r.jsx)("a",{href:"https://developers.google.com/tenor/guides/quickstart",children:(0,r.jsx)(n.p,{children:"Google's Tenor portal"})})," ",(0,r.jsxs)(n.p,{children:["and store it in the ",(0,r.jsx)("code",{children:"TENOR"})," variable. Tenor's v1 API is discontinued."]})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.p,{children:"Need more help? Just make an issue."})]})}function p(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>a});var i=s(6540);const r={},t=i.createContext(r);function l(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);