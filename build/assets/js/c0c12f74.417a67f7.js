"use strict";(globalThis.webpackChunkgabe_docs=globalThis.webpackChunkgabe_docs||[]).push([[899],{5824:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>r,contentTitle:()=>l,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"custom-commands/index","title":"Custom Commands","description":"Gabe ships with a flexible command loader\u2014adding new commands is as simple as dropping files into the right folder. Use this reference when building your own modules.","source":"@site/docs/custom-commands/index.mdx","sourceDirName":"custom-commands","slug":"/custom-commands/","permalink":"/docs/custom-commands/","draft":false,"unlisted":false,"editUrl":"https://github.com/thesomewhatyou/gabe/tree/gh-pages/docs/custom-commands/index.mdx","tags":[],"version":"current","frontMatter":{"title":"Custom Commands"},"sidebar":"tutorialSidebar","previous":{"title":"Containers","permalink":"/docs/containers/"},"next":{"title":"Welcome","permalink":"/docs/intro"}}');var c=n(4848),d=n(8453);const t={title:"Custom Commands"},l="Custom Commands",r={},o=[{value:"Directory Structure",id:"directory-structure",level:2},{value:"Command Structure",id:"command-structure",level:2},{value:"Runtime Properties",id:"runtime-properties",level:3},{value:"Static Fields",id:"static-fields",level:3},{value:"Helper Methods",id:"helper-methods",level:3},{value:"The <code>run</code> Function",id:"the-run-function",level:2}];function a(e){const s={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,d.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(s.header,{children:(0,c.jsx)(s.h1,{id:"custom-commands",children:"Custom Commands"})}),"\n",(0,c.jsx)(s.p,{children:"Gabe ships with a flexible command loader\u2014adding new commands is as simple as dropping files into the right folder. Use this reference when building your own modules."}),"\n",(0,c.jsx)(s.h2,{id:"directory-structure",children:"Directory Structure"}),"\n",(0,c.jsxs)(s.p,{children:["Commands are grouped into subdirectories under ",(0,c.jsx)(s.code,{children:"commands/"}),":"]}),"\n",(0,c.jsx)(s.pre,{children:(0,c.jsx)(s.code,{className:"language-text",children:"commands/\n  fun/\n    cat.js\n    ...\n  general/\n    help.js\n    ping.js\n    ...\n  image-editing/\n    caption.js\n    speed.js\n    ...\n"})}),"\n",(0,c.jsxs)(s.p,{children:["Each folder represents a category. Add a new directory for a new category; add a ",(0,c.jsx)(s.code,{children:".js"})," (or ",(0,c.jsx)(s.code,{children:".ts"}),") file inside a category to create a command."]}),"\n",(0,c.jsx)(s.admonition,{type:"tip",children:(0,c.jsxs)(s.p,{children:["The ",(0,c.jsx)(s.code,{children:"message"})," and ",(0,c.jsx)(s.code,{children:"user"})," categories register context menu commands instead of prefixed/slash commands. ",(0,c.jsx)(s.code,{children:"message"})," entries appear when right-clicking messages; ",(0,c.jsx)(s.code,{children:"user"})," entries appear when right-clicking members."]})}),"\n",(0,c.jsx)(s.admonition,{type:"tip",children:(0,c.jsxs)(s.p,{children:["On Node.js v23.6+, Node.js v22.6+ with ",(0,c.jsx)(s.code,{children:"--experimental-strip-types"}),", Deno, or Bun you can author commands in TypeScript by saving files with a ",(0,c.jsx)(s.code,{children:".ts"})," extension."]})}),"\n",(0,c.jsx)(s.h2,{id:"command-structure",children:"Command Structure"}),"\n",(0,c.jsxs)(s.p,{children:["Use the ",(0,c.jsx)(s.code,{children:"Command"})," base class from ",(0,c.jsx)(s.code,{children:"#cmd-classes/command.js"})," to access shared helpers and metadata."]}),"\n",(0,c.jsx)(s.pre,{children:(0,c.jsx)(s.code,{className:"language-js",children:'import Command from "#cmd-classes/command.js";\n\nclass HelloCommand extends Command {\n  async run() {\n    return "Hello world!";\n  }\n\n  static description = "A simple command example";\n  static aliases = ["helloworld"];\n}\n\nexport default HelloCommand;\n'})}),"\n",(0,c.jsxs)(s.ul,{children:["\n",(0,c.jsx)(s.li,{children:"Import the base class."}),"\n",(0,c.jsxs)(s.li,{children:["Extend it and implement ",(0,c.jsx)(s.code,{children:"run"}),"."]}),"\n",(0,c.jsx)(s.li,{children:"Provide static metadata (description, aliases, etc.)."}),"\n",(0,c.jsx)(s.li,{children:"File name (without extension) becomes the command name."}),"\n"]}),"\n",(0,c.jsx)(s.h3,{id:"runtime-properties",children:"Runtime Properties"}),"\n",(0,c.jsxs)(s.p,{children:["Inside ",(0,c.jsx)(s.code,{children:"run"})," you can access:"]}),"\n",(0,c.jsxs)(s.ul,{children:["\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"this.client"})," \u2014 Oceanic ",(0,c.jsx)(s.a,{href:"https://docs.oceanic.ws/latest/classes/Client.Client.html",children:(0,c.jsx)(s.code,{children:"Client"})})," instance."]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"this.database"})," \u2014 Database client (undefined in stateless mode)."]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"this.origOptions"})," \u2014 Raw handler options."]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"this.type"})," \u2014 ",(0,c.jsx)(s.code,{children:'"classic"'})," or ",(0,c.jsx)(s.code,{children:'"application"'}),"."]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"this.channel"})," \u2014 ",(0,c.jsx)(s.a,{href:"https://docs.oceanic.ws/latest/classes/TextChannel.TextChannel.html",children:(0,c.jsx)(s.code,{children:"TextChannel"})})," context (partial when classic commands are disabled)."]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"this.guild"})," \u2014 ",(0,c.jsx)(s.a,{href:"https://docs.oceanic.ws/latest/classes/Guild.Guild.html",children:(0,c.jsx)(s.code,{children:"Guild"})})," context (undefined in DMs)."]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"this.author"})," \u2014 ",(0,c.jsx)(s.a,{href:"https://docs.oceanic.ws/latest/classes/User.User.html",children:(0,c.jsx)(s.code,{children:"User"})})," who invoked the command."]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"this.member"})," \u2014 ",(0,c.jsx)(s.a,{href:"https://docs.oceanic.ws/latest/classes/Member.Member.html",children:(0,c.jsx)(s.code,{children:"Member"})})," when run in a guild."]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"this.permissions"})," \u2014 Bot ",(0,c.jsx)(s.a,{href:"https://docs.oceanic.ws/latest/classes/Permission.Permission.html",children:(0,c.jsx)(s.code,{children:"Permission"})})," set for the channel."]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"this.memberPermissions"})," \u2014 Invoker permissions."]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"this.locale"})," \u2014 Active locale (",(0,c.jsx)(s.code,{children:"LOCALE"})," for classic; user locale for interactions)."]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"this.cmdName"})," \u2014 Command name (includes subcommand path like ",(0,c.jsx)(s.code,{children:"base64 decode"}),")."]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"this.options"})," \u2014 Legacy options map. Prefer the helper methods below."]}),"\n"]}),"\n",(0,c.jsx)(s.p,{children:"Classic-only helpers:"}),"\n",(0,c.jsxs)(s.ul,{children:["\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"this.message"})," \u2014 ",(0,c.jsx)(s.a,{href:"https://docs.oceanic.ws/latest/classes/Message.Message.html",children:(0,c.jsx)(s.code,{children:"Message"})})," that triggered the command."]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"this.args"})," \u2014 Positional arguments array."]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"this.content"})," \u2014 Raw message content without prefix/name."]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"this.reference"})," \u2014 Reply metadata for ",(0,c.jsx)(s.code,{children:"channel.createMessage"}),"."]}),"\n"]}),"\n",(0,c.jsx)(s.p,{children:"Interaction-only helpers:"}),"\n",(0,c.jsxs)(s.ul,{children:["\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"this.interaction"})," \u2014 ",(0,c.jsx)(s.a,{href:"https://docs.oceanic.ws/latest/classes/CommandInteraction.CommandInteraction.html",children:(0,c.jsx)(s.code,{children:"CommandInteraction"})}),"."]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"this.success"})," \u2014 Set ",(0,c.jsx)(s.code,{children:"false"})," for ephemeral responses."]}),"\n"]}),"\n",(0,c.jsx)(s.h3,{id:"static-fields",children:"Static Fields"}),"\n",(0,c.jsx)(s.p,{children:"Configure behaviour with static properties:"}),"\n",(0,c.jsxs)(s.ul,{children:["\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"description"})," \u2014 Help text."]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"aliases"})," \u2014 Additional names."]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"flags"})," \u2014 Slash argument definitions (objects mirroring Discord option schema)."]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"ephemeral"})," \u2014 Force slash responses to be ephemeral."]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"slashAllowed"})," \u2014 Toggle slash registration."]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"directAllowed"})," \u2014 Allow DM usage."]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"userAllowed"})," \u2014 Allow user-install contexts."]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"adminOnly"})," \u2014 Restrict to bot owners."]}),"\n"]}),"\n",(0,c.jsxs)(s.p,{children:["Example ",(0,c.jsx)(s.code,{children:"flags"})," definition:"]}),"\n",(0,c.jsx)(s.pre,{children:(0,c.jsx)(s.code,{className:"language-js",children:'static flags = [{\n  name: "argument",\n  type: Constants.ApplicationCommandOptionTypes.STRING,\n  description: "Does a thing",\n  // ...additional Discord option fields\n}];\n'})}),"\n",(0,c.jsx)(s.h3,{id:"helper-methods",children:"Helper Methods"}),"\n",(0,c.jsxs)(s.ul,{children:["\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"this.acknowledge()"})," \u2014 Send typing (classic commands only)."]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"this.getString(key, returnNull?)"})," \u2014 Fetch localized strings."]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"this.clean(text)"})," \u2014 Sanitize mentions."]}),"\n"]}),"\n",(0,c.jsxs)(s.p,{children:["Option parsing helpers (use ",(0,c.jsx)(s.code,{children:"defaultArg"})," to fall back to positional arguments for classic commands):"]}),"\n",(0,c.jsxs)(s.ul,{children:["\n",(0,c.jsx)(s.li,{children:(0,c.jsx)(s.code,{children:"this.getOption(key, type, defaultArg?)"})}),"\n",(0,c.jsx)(s.li,{children:(0,c.jsx)(s.code,{children:"this.getOptionString(key, defaultArg?)"})}),"\n",(0,c.jsx)(s.li,{children:(0,c.jsx)(s.code,{children:"this.getOptionBoolean(key, defaultArg?)"})}),"\n",(0,c.jsx)(s.li,{children:(0,c.jsx)(s.code,{children:"this.getOptionNumber(key, defaultArg?)"})}),"\n",(0,c.jsx)(s.li,{children:(0,c.jsx)(s.code,{children:"this.getOptionInteger(key, defaultArg?)"})}),"\n",(0,c.jsx)(s.li,{children:(0,c.jsx)(s.code,{children:"this.getOptionUser(key, defaultArg?)"})}),"\n",(0,c.jsx)(s.li,{children:(0,c.jsx)(s.code,{children:"this.getOptionMember(key, defaultArg?)"})}),"\n",(0,c.jsx)(s.li,{children:(0,c.jsx)(s.code,{children:"this.getOptionRole(key, defaultArg?)"})}),"\n",(0,c.jsx)(s.li,{children:(0,c.jsx)(s.code,{children:"this.getOptionAttachment(key)"})}),"\n"]}),"\n",(0,c.jsxs)(s.h2,{id:"the-run-function",children:["The ",(0,c.jsx)(s.code,{children:"run"})," Function"]}),"\n",(0,c.jsxs)(s.p,{children:[(0,c.jsx)(s.code,{children:"run"})," should resolve to either a string (plain response) or an object (embeds, attachments, etc.). Because most commands need async work, the base class expects an ",(0,c.jsx)(s.code,{children:"async run()"})," that returns a ",(0,c.jsx)(s.code,{children:"Promise"}),"."]})]})}function h(e={}){const{wrapper:s}={...(0,d.R)(),...e.components};return s?(0,c.jsx)(s,{...e,children:(0,c.jsx)(a,{...e})}):a(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>t,x:()=>l});var i=n(6540);const c={},d=i.createContext(c);function t(e){const s=i.useContext(d);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:t(e.components),i.createElement(d.Provider,{value:s},e.children)}}}]);